# aws-soc2-non-prod Infrastructure Stack

## Overview
This stack is managed by Iltero's Infrastructure Unit Architecture with Template Bundle Marketplace integration.
All CI/CD behavior is driven by the `config.yml` file and compliance is managed through `controls_manifest.json`.

## Infrastructure Units
This stack consists of 3 infrastructure units:
- **network-baseline**: 0 terraform files
- **security-baseline**: 0 terraform files
- **monitoring-baseline**: 0 terraform files

## Architecture
```
infra/stacks/aws-soc2-non-prod/
├── config.yml                 # CI/CD orchestration
├── units/                     # Infrastructure units (Template Service)
│   ├── network-baseline/main.tf, variables.tf, outputs.tf
│   ├── security-baseline/main.tf, variables.tf, outputs.tf
│   ├── monitoring-baseline/main.tf, variables.tf, outputs.tf
├── environments/              # Environment configs (Bootstrap System)
│   ├── development/
│   │   ├── providers.tf       # Shared provider config
│   │   ├── backend/            # Per-unit backends
│   │   │   ├── network-baseline.hcl
│   │   │   ├── security-baseline.hcl
│   │   │   ├── monitoring-baseline.hcl
│   │   └── tfvars/            # Per-unit variables
│   │   │   ├── network-baseline.tfvars
│   │   │   ├── security-baseline.tfvars
│   │   │   ├── monitoring-baseline.tfvars
│   ├── staging/
│   └── production/
└── README.md
```

## Template Bundle Integration
- **Template ID**: technology-aws-modern-stack
- **Template Version**: 1.0.0
- **Bootstrap Type**: Infrastructure Units with Template Bundle Marketplace

## Infrastructure Unit Coordination (UIC)
Infrastructure units are coordinated through UIC contracts that define:
- **Provides**: Resources and outputs each unit makes available
- **Requires**: Dependencies each unit needs from other units
- **Deployment Order**: Sequence for terraform apply operations

### Unit Dependencies
- **network-baseline**: requires [] | provides []
- **security-baseline**: requires [] | provides []
- **monitoring-baseline**: requires [] | provides []

## Deployment
This stack is automatically deployed through GitHub Actions when:
1. Changes are pushed to the repository
2. The platform workflows detect changes in this stack
3. Compliance scanning passes (resolved at scan-time via Iltero API)
4. Required approvals are obtained (for production)

## Compliance Integration
Compliance is enforced at scan-time, not bootstrap-time:
- CLI calls `POST /v1/compliance/resolve-policies` before each scan
- Manifest + policy bundles are resolved from registry
- CLI writes `iltero/compliance_manifest.json` and `iltero/run_snapshot.json`
- Results are submitted with manifest hash for provenance tracking

## Configuration Management
- **DO NOT** edit workflow files directly
- All behavior is controlled through `config.yml`
- Environment policies cascade from Environment → Workspace → Stack
- Infrastructure unit variables follow three-layer precedence:
  1. Compliance variables (highest)
  2. Infrastructure unit interface variables
  3. Context variables (lowest)

## Infrastructure Units
Units are deployed in dependency order as specified in their UIC contracts.
Each unit can depend on outputs from previously deployed units through terraform_remote_state.

### Unit Structure
Each infrastructure unit follows this structure:
- `main.tf`: Infrastructure unit module call
- `variables.tf`: Input variables with precedence annotations
- `outputs.tf`: Exported values for other units
- `_dependencies.tf`: Cross-unit dependencies (auto-generated)

## Template Bundle Marketplace
This stack was generated from the Template Bundle Marketplace using:
- Infrastructure unit architecture
- Compliance framework integration
- Environment-first CI/CD patterns
- UIC coordination for multi-unit deployments

## Support
For assistance, contact your platform administrator or refer to the
Iltero documentation at https://docs.iltero.com

---
Generated by Iltero Infrastructure Unit Bootstrap System
Template Bundle ID: technology-aws-modern-stack
Generated at: 2026-01-04T08:04:13.741391+00:00
